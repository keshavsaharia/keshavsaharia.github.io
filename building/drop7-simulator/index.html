<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="A Java simulator to find the optimal move in an iPhone game.">
    <meta name="author" content="Keshav Saharia">

    <title>Drop7 Simulator</title>
    <link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" rel="stylesheet">
<link href="http://keshav.is/css/style.css" rel="stylesheet">
<link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
<!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
	<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

</head>

<body>
	<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
	<div class="container-fluid">
		<div class="navbar-header page-scroll">
			<button type="button" class="navbar-toggle" data-toggle="collapse"
				data-target="#collapse">
				<span class="sr-only">Toggle navigation</span> <span
					class="icon-bar"></span> <span class="icon-bar"></span> <span
					class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="http://keshav.is">keshav.is</a>
		</div>
		<!--<div class="collapse navbar-collapse" id="collapse">
			<ul class="nav navbar-nav navbar-right">
				<li><a href="http://keshav.is/building">Projects</a></li>
				<li><a href="http://keshav.is/writing">Writing</a></li>
				<li><a href="http://keshav.is/teaching">Teaching</a></li>
				<li><a href="http://keshav.is/contact">Contact</a></li>
			</ul>
		</div>-->
	</div>
</nav>


    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header class="intro-header" style="background-image: url('http://keshav.is/img/splash/drop7.jpg')">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="post-heading">
                        <h1>Drop7 Simulator</h1>
                        <h2 class="subheading">A Java simulator to find the optimal move in an iPhone game.</h2>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Post Content -->
    <article>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 content">
                	<h1>Drop7 Simulator</h1>
<p>I became pretty obsessed with an iPhone game called &ldquo;Drop7&rdquo; in my freshman year of college, and built a rudimentary Java simulator to help me pick the optimal move. My original code is on <a href="https://github.com/keshavsaharia/Drop7Simulator">GitHub</a>, and I made a <a href="https://github.com/">far superior version</a>.</p>
<p><img src="http://keshav.is/img/building/drop7/PIC1.jpg" alt="" /></p>
<p>The objective of Drop7 is to maximize your score before the screen fills up with discs. Every turn, a random disc numbered 1 - 7 is given to you to drop in any of the 7 columns on the screen. If, after you drop the disc, any of the discs on the grid have a number that is equal to the number of discs it is touching horizontally or vertically, the disc explodes and you get some points. All discs explode simultaneously, and any discs with empty space under them will fall down to fill the space. If the rearrangement of discs by gravity causes more numbered discs to be touching the number of discs required to explode, they will explode in another step that gives you an exponentially increasing number of points. A typical Drop7 strategy is to set up chains of explosions to earn more points for each disc.</p>
<p>I first created a program in Java that can simulate a game of Drop7. Then, I used a permutation generator to search all permutations of moves with a variable depth and calculate the expected score for each column that the piece could be dropped in. I remember that when I ran the original version, it took almost 10 minutes to do a 5-ply search on the game tree (i.e. to look 5 moves ahead). It also didn't account for the probabilistic subtrees associated with the hidden values in gray squares.</p>
<p><img src="http://keshav.is/img/building/drop7/PIC3.jpg" alt="" /></p>
<h2>Some notes about the game tree</h2>
<p>Since part of the strategy is to set up explosions, moves that give fewer immediate points tend to provide more points later, so there is no apparent pruning strategy that doesn't run the risk of eliminating continuations that may be valuable. One pruning strategy that <em>is</em> effective is to do a single search for any drop where only the dropped disc explodes. This reduces the branching factor from 49 (7 possible discs in 7 possible columns) to around 28.</p>

                </div>
            </div>
        </div>
    </article>

    <hr>

    <footer>
	<div class="container">
		<div class="row">
			<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
				<ul class="list-inline text-center">
					<li><a href="https://twitter.com/queshav"> 
						<span class="fa-stack fa-lg"> 
							<i class="fa fa-circle fa-stack-2x"></i> 
							<i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
						</span>
					</a></li>
					<li><a href="https://www.linkedin.com/pub/keshav-saharia/32/61b/541"> 
						<span class="fa-stack fa-lg"> 
							<i class="fa fa-circle fa-stack-2x"></i> 
							<i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
						</span>
					</a></li>
					<li><a href="https://github.com/keshavsaharia"> 
						<span class="fa-stack fa-lg"> 
							<i class="fa fa-circle fa-stack-2x"></i> 
							<i class="fa fa-github fa-stack-1x fa-inverse"></i>
						</span>
					</a></li>
				</ul>
				<p class="copyright text-muted">Copyright &copy; Keshav Saharia 2015</p>
			</div>
		</div>
	</div>
</footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
<script src="http://keshav.is/js/blog.js"></script>

</body>

</html>
